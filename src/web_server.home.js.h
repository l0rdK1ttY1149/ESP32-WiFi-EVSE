static const char CONTENT_HOME_JS[] PROGMEM = 
  "(function(){function h(b,c,a){a=void 0===a?{}:a;this.remoteUrl=c;ko.mapping.fromJS(b,a,this);this.fetching=ko.observable(!1)}function k(b){var c=this,a=ko.pureComputed(function(){return b()+\"/status\"});h.call(c,{mode:\"ERR\",srssi:\"\",ipaddress:\"\",packets_sent:0,packets_success:0,emoncms_connected:0,mqtt_connected:0,ohm_hour:\"\",free_heap:0,comm_sent:0,comm_success:0,amp:0,pilot:0,temp1:0,temp2:0,temp3:0,state:0,elapsed:0,wattsec:0,watthour:0,divertmode:1},a);c.isWifiClient=ko.pureComputed(function(){return\"STA\"===\n"
  "c.mode()||\"STA+AP\"===c.mode()});c.isWifiAccessPoint=ko.pureComputed(function(){return\"AP\"===c.mode()||\"STA+AP\"===c.mode()});c.fullMode=ko.pureComputed(function(){switch(c.mode()){case \"AP\":return\"Access Point (AP)\";case \"STA\":return\"Client (STA)\";case \"STA+AP\":return\"Client + Access Point (STA+AP)\"}return\"Unknown (\"+c.mode()+\")\"});this.estate=ko.pureComputed(function(){switch(c.state()){case 0:var a=\"Starting\";break;case 1:a=\"Not Connected\";break;case 2:a=\"EV Connected\";break;case 3:a=\"Charging\";\n"
  "break;case 4:a=\"Vent Required\";break;case 5:a=\"Diode Check Failed\";break;case 6:a=\"GFCI Fault\";break;case 7:a=\"No Earth Ground\";break;case 8:a=\"Stuck Relay\";break;case 9:a=\"GFCI Self Test Failed\";break;case 10:a=\"Over Temperature\";break;case 254:a=\"Waiting\";break;case 255:a=\"Disabled\";break;default:a=\"Invalid\"}return a})}function l(b){var c=ko.pureComputed(function(){return b()+\"/config\"});h.call(this,{ssid:\"\",pass:\"\",emoncms_server:\"data.openevse.com/emoncms\",emoncms_apikey:\"\",emoncms_node:\"\",emoncms_fingerprint:\"\",\n"
  "emoncms_enabled:0,mqtt_server:\"\",mqtt_topic:\"\",mqtt_user:\"\",mqtt_pass:\"\",mqtt_solar:\"\",mqtt_grid_ie:\"\",mqtt_enabled:0,ohm_enabled:0,ohmkey:\"\",www_username:\"\",www_password:\"\",firmware:\"-\",protocol:\"-\",espflash:0,diodet:0,gfcit:0,groundt:0,relayt:0,ventt:0,tempt:0,scale:1,offset:0,gfcicount:0,nogndcount:0,stuckcount:0,version:\"0.0.0\"},c)}function p(b){ko.mapping.fromJS(b,{},this)}function q(b){var c=this,a=ko.pureComputed(function(){return b()+\"/scan\"});c.results=ko.mapping.fromJS([],{key:function(a){return ko.utils.unwrapObservable(a.bssid)},\n"
  "create:function(a){return new p(a.data)}});c.fetching=ko.observable(!1);c.update=function(b){b=void 0===b?function(){}:b;c.fetching(!0);$.get(a(),function(a){ko.mapping.fromJS(a,c.results);c.results.sort(function(a,b){return a.ssid()===b.ssid()?a.rssi()<b.rssi()?1:-1:a.ssid()<b.ssid()?-1:1})},\"json\").always(function(){c.fetching(!1);b()})}}function r(b){var c=this;c.baseEndpoint=b;c.rapiSend=ko.observable(!1);c.cmd=ko.observable(\"\");c.ret=ko.observable(\"\");c.send=function(){c.rapiSend(!0);$.get(c.baseEndpoint()+\n"
  "\"/r?json=1&rapi=\"+encodeURI(c.cmd()),function(a){c.ret(\">\"+a.ret);c.cmd(a.cmd)},\"json\").always(function(){c.rapiSend(!1)})}}function t(b){function c(a){return(10>a?\"0\":\"\")+a}function a(){f=setInterval(function(){d.automaticTime()&&d.nowTimedate(new Date(d.evseTimedate().getTime()+(new Date-d.localTimedate())));b.isCharging()&&d.elapsedNow(new Date(1E3*b.status.elapsed()+(new Date-d.elapsedLocal())))},1E3)}var d=this;d.evseTimedate=ko.observable(new Date);d.localTimedate=ko.observable(new Date);d.nowTimedate=\n"
  "ko.observable(null);d.elapsedNow=ko.observable(new Date(0));d.elapsedLocal=ko.observable(new Date);d.date=ko.pureComputed({read:function(){return null===d.nowTimedate()?\"\":d.nowTimedate().toISOString().split(\"T\")[0]},write:function(a){d.evseTimedate(new Date(a));d.localTimedate(new Date)}});d.time=ko.pureComputed({read:function(){if(null===d.nowTimedate())return\"--:--:--\";var a=d.nowTimedate();return c(a.getHours())+\":\"+c(a.getMinutes())+\":\"+c(a.getSeconds())},write:function(a){a=a.split(\":\");var b=\n"
  "d.evseTimedate();b.setHours(parseInt(a[0]));b.setMinutes(parseInt(a[1]));d.evseTimedate(b);d.localTimedate(new Date)}});d.elapsed=ko.pureComputed(function(){if(null===d.nowTimedate())return\"0:00:00\";var a=d.elapsedNow();return c(a.getHours())+\":\"+c(a.getMinutes())+\":\"+c(a.getSeconds())});b.status.elapsed.subscribe(function(a){d.elapsedNow(new Date(1E3*a));d.elapsedLocal(new Date)});var f=null;d.automaticTime=ko.observable(!0);d.setTime=function(){var a=d.automaticTime()?new Date:d.evseTimedate();\n"
  "b.openevse.time(d.timeUpdate,a)};d.timeUpdate=function(b){null!==f&&(clearInterval(f),f=null);d.evseTimedate(b);d.nowTimedate(b);d.localTimedate(new Date);a()}}function u(b,c){var a=this,d=ko.pureComputed(function(){return b()+\"/r\"});a.openevse=new OpenEVSE(d());d.subscribe(function(b){a.openevse.setEndpoint(b)});a.status=c;a.time=new t(a);a.serviceLevels=[{name:\"Auto\",value:0},{name:\"1\",value:1},{name:\"2\",value:2}];a.currentLevels=ko.observableArray([]);a.timeLimits=[{name:\"none\",value:0},{name:\"15 min\",\n"
  "value:15},{name:\"30 min\",value:30},{name:\"45 min\",value:45},{name:\"1 hour\",value:60},{name:\"1.5 hours\",value:90},{name:\"2 hours\",value:120},{name:\"2.5 hours\",value:150},{name:\"3 hours\",value:180},{name:\"4 hours\",value:240},{name:\"5 hours\",value:300},{name:\"6 hours\",value:360},{name:\"7 hours\",value:420},{name:\"8 hours\",value:480}];a.chargeLimits=[{name:\"none\",value:0},{name:\"1 kWh\",value:1},{name:\"2 kWh\",value:2},{name:\"3 kWh\",value:3},{name:\"4 kWh\",value:4},{name:\"5 kWh\",value:5},{name:\"6 kWh\",value:6},\n"
  "{name:\"7 kWh\",value:7},{name:\"8 kWh\",value:8},{name:\"9 kWh\",value:9},{name:\"10 kWh\",value:10},{name:\"15 kWh\",value:11},{name:\"20 kWh\",value:12},{name:\"25 kWh\",value:25},{name:\"30 kWh\",value:30},{name:\"35 kWh\",value:35},{name:\"40 kWh\",value:40},{name:\"45 kWh\",value:45},{name:\"50 kWh\",value:50},{name:\"55 kWh\",value:55},{name:\"60 kWh\",value:60},{name:\"70 kWh\",value:70},{name:\"80 kWh\",value:80},{name:\"90 kWh\",value:90}];a.serviceLevel=ko.observable(-1);a.actualServiceLevel=ko.observable(-1);a.minCurrentLevel=\n"
  "ko.observable(-1);a.maxCurrentLevel=ko.observable(-1);a.currentCapacity=ko.observable(-1);a.timeLimit=ko.observable(-1);a.chargeLimit=ko.observable(-1);a.delayTimerEnabled=ko.observable(!1);a.delayTimerStart=ko.observable(\"--:--\");a.delayTimerStop=ko.observable(\"--:--\");a.gfiSelfTestEnabled=ko.observable(!1);a.groundCheckEnabled=ko.observable(!1);a.stuckRelayEnabled=ko.observable(!1);a.tempCheckEnabled=ko.observable(!1);a.diodeCheckEnabled=ko.observable(!1);a.ventRequiredEnabled=ko.observable(!1);\n"
  "a.allTestsEnabled=ko.pureComputed(function(){return a.gfiSelfTestEnabled()&&a.groundCheckEnabled()&&a.stuckRelayEnabled()&&a.tempCheckEnabled()&&a.diodeCheckEnabled()&&a.ventRequiredEnabled()});a.tempCheckSupported=ko.observable(!1);a.isConnected=ko.pureComputed(function(){return-1!==[2,3].indexOf(a.status.state())});a.isReady=ko.pureComputed(function(){return-1!==[0,1].indexOf(a.status.state())});a.isCharging=ko.pureComputed(function(){return 3===a.status.state()});a.isError=ko.pureComputed(function(){return-1!==\n"
  "[4,5,6,7,8,9,10].indexOf(a.status.state())});a.isEnabled=ko.pureComputed(function(){return-1!==[0,1,2,3].indexOf(a.status.state())});a.isSleeping=ko.pureComputed(function(){return 254===a.status.state()});a.isDisabled=ko.pureComputed(function(){return 255===a.status.state()});a.selectTimeLimit=function(b){if(a.timeLimit()!==b)for(var e=0;e<a.timeLimits.length;e++){var c=a.timeLimits[e];if(c.value>=b){a.timeLimit(c.value);break}}};a.selectChargeLimit=function(b){if(a.chargeLimit()!==b)for(var e=0;e<\n"
  "a.chargeLimits.length;e++){var c=a.chargeLimits[e];if(c.value>=b){a.chargeLimit(c.value);break}}};var f=[function(){return a.openevse.time(a.time.timeUpdate)},function(){return a.openevse.service_level(function(b,c){a.serviceLevel(b);a.actualServiceLevel(c)})},function(){return a.updateCurrentCapacity()},function(){return a.openevse.current_capacity(function(b){a.currentCapacity(b)})},function(){return a.openevse.time_limit(function(b){a.selectTimeLimit(b)})},function(){return a.openevse.charge_limit(function(b){a.selectChargeLimit(b)})},\n"
  "function(){return a.openevse.gfi_self_test(function(b){a.gfiSelfTestEnabled(b)})},function(){return a.openevse.ground_check(function(b){a.groundCheckEnabled(b)})},function(){return a.openevse.stuck_relay_check(function(b){a.stuckRelayEnabled(b)})},function(){return a.openevse.temp_check(function(b){a.tempCheckEnabled(b)})},function(){return a.openevse.diode_check(function(b){a.diodeCheckEnabled(b)})},function(){return a.openevse.vent_required(function(b){a.ventRequiredEnabled(b)})},function(){return a.openevse.over_temperature_thresholds(function(){a.tempCheckSupported(!0)}).error(function(){a.tempCheckSupported(!1)})},\n"
  "function(){return a.openevse.timer(function(b,c,g){a.delayTimerEnabled(b);a.delayTimerStart(c);a.delayTimerStop(g)})}],g=-1;a.updateCurrentCapacity=function(){return a.openevse.current_capacity_range(function(b,c){a.minCurrentLevel(b);a.maxCurrentLevel(c);var g=a.currentCapacity();a.currentLevels.removeAll();for(var e=a.minCurrentLevel();e<=a.maxCurrentLevel();e++)a.currentLevels.push({name:e+\" A\",value:e});a.currentCapacity(g)})};a.updatingServiceLevel=ko.observable(!1);a.savedServiceLevel=ko.observable(!1);\n"
  "a.updatingCurrentCapacity=ko.observable(!1);a.savedCurrentCapacity=ko.observable(!1);a.updatingTimeLimit=ko.observable(!1);a.savedTimeLimit=ko.observable(!1);a.updatingChargeLimit=ko.observable(!1);a.savedChargeLimit=ko.observable(!1);a.updatingDelayTimer=ko.observable(!1);a.savedDelayTimer=ko.observable(!1);a.updatingStatus=ko.observable(!1);a.savedStatus=ko.observable(!1);a.updatingGfiSelfTestEnabled=ko.observable(!1);a.savedGfiSelfTestEnabled=ko.observable(!1);a.updatingGroundCheckEnabled=ko.observable(!1);\n"
  "a.savedGroundCheckEnabled=ko.observable(!1);a.updatingStuckRelayEnabled=ko.observable(!1);a.savedStuckRelayEnabled=ko.observable(!1);a.updatingTempCheckEnabled=ko.observable(!1);a.savedTempCheckEnabled=ko.observable(!1);a.updatingDiodeCheckEnabled=ko.observable(!1);a.savedDiodeCheckEnabled=ko.observable(!1);a.updatingVentRequiredEnabled=ko.observable(!1);a.savedVentRequiredEnabled=ko.observable(!1);a.setForTime=function(a,b){a(!0);setTimeout(function(){a(!1)},b)};var m=!1;a.subscribe=function(){m||\n"
  "(a.serviceLevel.subscribe(function(b){a.updatingServiceLevel(!0);a.openevse.service_level(function(b,c){a.setForTime(a.savedServiceLevel,2E3);a.actualServiceLevel(c);a.updateCurrentCapacity().always(function(){})},b).always(function(){a.updatingServiceLevel(!1)})}),a.currentCapacity.subscribe(function(b){!0!==a.updatingServiceLevel()&&(a.updatingCurrentCapacity(!0),a.openevse.current_capacity(function(c){a.setForTime(a.savedCurrentCapacity,2E3);b!==c&&a.currentCapacity(c)},b).always(function(){a.updatingCurrentCapacity(!1)}))}),\n"
  "a.timeLimit.subscribe(function(b){a.updatingTimeLimit(!0);a.openevse.time_limit(function(c){a.setForTime(a.savedTimeLimit,2E3);b!==c&&a.selectTimeLimit(c)},b).always(function(){a.updatingTimeLimit(!1)})}),a.chargeLimit.subscribe(function(b){a.updatingChargeLimit(!0);a.openevse.charge_limit(function(c){a.setForTime(a.savedChargeLimit,2E3);b!==c&&a.selectChargeLimit(c)},b).always(function(){a.updatingChargeLimit(!1)})}),a.gfiSelfTestEnabled.subscribe(function(b){a.updatingGfiSelfTestEnabled(!0);a.openevse.gfi_self_test(function(c){a.setForTime(a.savedGfiSelfTestEnabled,\n"
  "2E3);b!==c&&a.gfiSelfTestEnabled(c)},b).always(function(){a.updatingGfiSelfTestEnabled(!1)})}),a.groundCheckEnabled.subscribe(function(b){a.updatingGroundCheckEnabled(!0);a.openevse.ground_check(function(c){a.setForTime(a.savedGroundCheckEnabled,2E3);b!==c&&a.groundCheckEnabled(c)},b).always(function(){a.updatingGroundCheckEnabled(!1)})}),a.stuckRelayEnabled.subscribe(function(b){a.updatingStuckRelayEnabled(!0);a.savedStuckRelayEnabled(!1);a.openevse.stuck_relay_check(function(c){a.savedStuckRelayEnabled(!0);\n"
  "setTimeout(function(){a.savedStuckRelayEnabled(!1)},2E3);b!==c&&a.stuckRelayEnabled(c)},b).always(function(){a.updatingStuckRelayEnabled(!1)})}),a.tempCheckEnabled.subscribe(function(b){a.updatingTempCheckEnabled(!0);a.openevse.temp_check(function(c){a.setForTime(a.savedTempCheckEnabled,2E3);b!==c&&a.tempCheckEnabled(c)},b).always(function(){a.updatingTempCheckEnabled(!1)})}),a.diodeCheckEnabled.subscribe(function(b){a.updatingDiodeCheckEnabled(!0);a.openevse.diode_check(function(c){a.setForTime(a.savedDiodeCheckEnabled,\n"
  "2E3);b!==c&&a.diodeCheckEnabled(c)},b).always(function(){a.updatingDiodeCheckEnabled(!1)})}),a.ventRequiredEnabled.subscribe(function(b){a.updatingVentRequiredEnabled(!0);a.openevse.vent_required(function(c){a.setForTime(a.savedVentRequiredEnabled,2E3);b!==c&&a.ventRequiredEnabled(c)},b).always(function(){a.updatingVentRequiredEnabled(!1)})}),m=!0)};a.update=function(b){g=0;a.nextUpdate(void 0===b?function(){}:b)};a.nextUpdate=function(b){(0,f[g])().always(function(){++g<f.length?a.nextUpdate(b):\n"
  "(a.subscribe(),b())})};a.delayTimerValid=ko.pureComputed(function(){return/([01]\\d|2[0-3]):([0-5]\\d)/.test(a.delayTimerStart())&&/([01]\\d|2[0-3]):([0-5]\\d)/.test(a.delayTimerStop())});a.startDelayTimer=function(){a.updatingDelayTimer(!0);a.openevse.timer(function(){a.delayTimerEnabled(!0)},a.delayTimerStart(),a.delayTimerStop()).always(function(){a.updatingDelayTimer(!1)})};a.stopDelayTimer=function(){a.updatingDelayTimer(!0);a.openevse.cancelTimer(function(){a.delayTimerEnabled(!1)}).always(function(){a.updatingDelayTimer(!1)})};\n"
  "a.setStatus=function(b){a.updatingStatus(!0);a.openevse.status(function(b){a.status.state(b)},b).always(function(){a.updatingStatus(!1)})};a.restartFetching=ko.observable(!1);a.restart=function(){confirm(\"Restart OpenEVSE? Current config will be saved, takes approximately 10s.\")&&(a.restartFetching(!0),a.openevse.reset().always(function(){a.restartFetching(!1)}))}}function v(){var b=this;b.baseHost=ko.observable(\"\"!==n?n:\"openevse.local\");b.baseEndpoint=ko.pureComputed(function(){return\"http://\"+\n"
  "b.baseHost()});b.config=new l(b.baseEndpoint);b.status=new k(b.baseEndpoint);b.rapi=new r(b.baseEndpoint);b.scan=new q(b.baseEndpoint);b.openevse=new u(b.baseEndpoint,b.status);b.initialised=ko.observable(!1);b.updating=ko.observable(!1);b.scanUpdating=ko.observable(!1);b.bssid=ko.observable(\"\");b.bssid.subscribe(function(a){for(var c=0;c<b.scan.results().length;c++){var g=b.scan.results()[c];if(a===g.bssid()){b.config.ssid(g.ssid());break}}});b.showMqttInfo=ko.observable(!1);b.showSolarDivert=ko.observable(!1);\n"
  "b.toggle=function(b){b(!b())};b.advancedMode=ko.observable(!1);b.developerMode=ko.observable(!1);b.developerMode.subscribe(function(a){a&&b.advancedMode(!0)});var c=null,a=null,d=\"status\";\"\"!==window.location.hash&&(d=window.location.hash.substr(1));b.tab=ko.observable(d);b.tab.subscribe(function(b){window.location.hash=\"#\"+b});b.isSystem=ko.pureComputed(function(){return\"system\"===b.tab()});b.isServices=ko.pureComputed(function(){return\"services\"===b.tab()});b.isStatus=ko.pureComputed(function(){return\"status\"===\n"
  "b.tab()});b.isRapi=ko.pureComputed(function(){return\"rapi\"===b.tab()});b.upgradeUrl=ko.observable(\"about:blank\");b.start=function(){b.updating(!0);b.status.update(function(){b.config.update(function(){b.baseHost().endsWith(\".local\")&&\"\"!==b.status.ipaddress()&&(\"\"===b.config.www_username()?b.baseHost(b.status.ipaddress()):window.location.replace(\"http://\"+b.status.ipaddress()));b.openevse.update(function(){b.initialised(!0);c=setTimeout(b.update,5E3);b.upgradeUrl(b.baseEndpoint()+\"/update\");for(var a=\n"
  "document.getElementsByTagName(\"img\"),d=0;d<a.length;d++)a[d].getAttribute(\"data-src\")&&a[d].setAttribute(\"src\",a[d].getAttribute(\"data-src\"));b.updating(!1)})});b.connect()})};b.update=function(){b.updating()||(b.updating(!0),null!==c&&(clearTimeout(c),c=null),b.status.update(function(){c=setTimeout(b.update,5E3);b.updating(!1)}))};var f=!1;b.startScan=function(){b.scanUpdating()||(f=!0,b.scanUpdating(!0),null!==a&&(clearTimeout(a),a=null),b.scan.update(function(){f&&(a=setTimeout(b.startScan,3E3));\n"
  "b.scanUpdating(!1)}))};b.stopScan=function(){f=!1;b.scanUpdating()||null===a||(clearTimeout(a),a=null)};b.wifiConnecting=ko.observable(!1);b.status.mode.subscribe(function(a){\"STA+AP\"!==a&&\"STA\"!==a||b.wifiConnecting(!1);\"STA+AP\"===a||\"AP\"===a?b.startScan():b.stopScan()});b.saveNetworkFetching=ko.observable(!1);b.saveNetworkSuccess=ko.observable(!1);b.saveNetwork=function(){\"\"===b.config.ssid()?alert(\"Please select network\"):(b.saveNetworkFetching(!0),b.saveNetworkSuccess(!1),$.post(b.baseEndpoint()+\n"
  "\"/savenetwork\",{ssid:b.config.ssid(),pass:b.config.pass()},function(){b.saveNetworkSuccess(!0);b.wifiConnecting(!0)}).fail(function(){alert(\"Failed to save WiFi config\")}).always(function(){b.saveNetworkFetching(!1)}))};b.saveAdminFetching=ko.observable(!1);b.saveAdminSuccess=ko.observable(!1);b.saveAdmin=function(){b.saveAdminFetching(!0);b.saveAdminSuccess(!1);$.post(b.baseEndpoint()+\"/saveadmin\",{user:b.config.www_username(),pass:b.config.www_password()},function(){b.saveAdminSuccess(!0)}).fail(function(){alert(\"Failed to save Admin config\")}).always(function(){b.saveAdminFetching(!1)})};\n"
  "b.saveEmonCmsFetching=ko.observable(!1);b.saveEmonCmsSuccess=ko.observable(!1);b.saveEmonCms=function(){var a={enable:b.config.emoncms_enabled(),server:b.config.emoncms_server(),apikey:b.config.emoncms_apikey(),node:b.config.emoncms_node(),fingerprint:b.config.emoncms_fingerprint()};!a.enable||\"\"!==a.server&&\"\"!==a.node?a.enable&&32!==a.apikey.length&&\"___DUMMY_PASSWORD___\"!==a.apikey?alert(\"Please enter valid Emoncms apikey\"):a.enable&&\"\"!==a.fingerprint&&59!==a.fingerprint.length?alert(\"Please enter valid SSL SHA-1 fingerprint\"):\n"
  "(b.saveEmonCmsFetching(!0),b.saveEmonCmsSuccess(!1),$.post(b.baseEndpoint()+\"/saveemoncms\",a,function(){b.saveEmonCmsSuccess(!0)}).fail(function(){alert(\"Failed to save Admin config\")}).always(function(){b.saveEmonCmsFetching(!1)})):alert(\"Please enter Emoncms server and node\")};b.saveMqttFetching=ko.observable(!1);b.saveMqttSuccess=ko.observable(!1);b.saveMqtt=function(){var a={enable:b.config.mqtt_enabled(),server:b.config.mqtt_server(),topic:b.config.mqtt_topic(),user:b.config.mqtt_user(),pass:b.config.mqtt_pass(),\n"
  "solar:b.config.mqtt_solar(),grid_ie:b.config.mqtt_grid_ie()};a.enable&&\"\"===a.server?alert(\"Please enter MQTT server\"):(b.saveMqttFetching(!0),b.saveMqttSuccess(!1),$.post(b.baseEndpoint()+\"/savemqtt\",a,function(){b.saveMqttSuccess(!0)}).fail(function(){alert(\"Failed to save MQTT config\")}).always(function(){b.saveMqttFetching(!1)}))};b.saveOhmKeyFetching=ko.observable(!1);b.saveOhmKeySuccess=ko.observable(!1);b.saveOhmKey=function(){b.saveOhmKeyFetching(!0);b.saveOhmKeySuccess(!1);$.post(b.baseEndpoint()+\n"
  "\"/saveohmkey\",{enable:b.config.ohm_enabled(),ohm:b.config.ohmkey()},function(){b.saveOhmKeySuccess(!0)}).fail(function(){alert(\"Failed to save Ohm key config\")}).always(function(){b.saveOhmKeyFetching(!1)})};b.turnOffAccessPointFetching=ko.observable(!1);b.turnOffAccessPointSuccess=ko.observable(!1);b.turnOffAccessPoint=function(){b.turnOffAccessPointFetching(!0);b.turnOffAccessPointSuccess(!1);$.post(b.baseEndpoint()+\"/apoff\",{},function(a){console.log(a);\"\"!==b.status.ipaddress()?setTimeout(function(){window.location=\n"
  "\"http://\"+b.status.ipaddress();b.turnOffAccessPointSuccess(!0)},3E3):b.turnOffAccessPointSuccess(!0)}).fail(function(){alert(\"Failed to turn off Access Point\")}).always(function(){b.turnOffAccessPointFetching(!1)})};b.changeDivertModeFetching=ko.observable(!1);b.changeDivertModeSuccess=ko.observable(!1);b.changeDivertMode=function(a){b.status.divertmode()!==a&&(b.status.divertmode(a),b.changeDivertModeFetching(!0),b.changeDivertModeSuccess(!1),$.post(b.baseEndpoint()+\"/divertmode\",{divertmode:a},\n"
  "function(){b.changeDivertModeSuccess(!0)}).fail(function(){alert(\"Failed to set divert mode\")}).always(function(){b.changeDivertModeFetching(!1)}))};b.isEcoModeAvailable=ko.pureComputed(function(){return b.config.mqtt_enabled()&&(\"\"!==b.config.mqtt_solar()||\"\"!==b.config.mqtt_grid_ie())});b.ecoMode=ko.pureComputed({read:function(){return 2===b.status.divertmode()},write:function(a){b.changeDivertMode(a?2:1)}});b.factoryResetFetching=ko.observable(!1);b.factoryResetSuccess=ko.observable(!1);b.factoryReset=\n"
  "function(){confirm(\"CAUTION: Do you really want to Factory Reset? All setting and config will be lost.\")&&(b.factoryResetFetching(!0),b.factoryResetSuccess(!1),$.post(b.baseEndpoint()+\"/reset\",{},function(){b.factoryResetSuccess(!0)}).fail(function(){alert(\"Failed to Factory Reset\")}).always(function(){b.factoryResetFetching(!1)}))};b.restartFetching=ko.observable(!1);b.restartSuccess=ko.observable(!1);b.restart=function(){confirm(\"Restart OpenEVSE WiFi? Current config will be saved, takes approximately 10s.\")&&\n"
  "(b.restartFetching(!0),b.restartSuccess(!1),$.post(b.baseEndpoint()+\"/restart\",{},function(){b.restartSuccess(!0)}).fail(function(){alert(\"Failed to restart\")}).always(function(){b.restartFetching(!1)}))};b.pingInterval=!1;b.socket=!1;b.connect=function(){b.socket=new WebSocket(\"ws://\"+b.baseHost()+\"/ws\");b.socket.onopen=function(a){console.log(a);b.pingInterval=setInterval(function(){b.socket.send('{\"ping\":1}')},1E3)};b.socket.onclose=function(a){console.log(a);b.reconnect()};b.socket.onmessage=\n"
  "function(a){console.log(a);ko.mapping.fromJSON(a.data,b.status)};b.socket.onerror=function(a){console.log(a);b.socket.close();b.reconnect()}};b.reconnect=function(){!1!==b.pingInterval&&(clearInterval(b.pingInterval),b.pingInterval=!1);setTimeout(function(){b.connect()},500)}}var n=window.location.hostname;h.prototype.update=function(b){b=void 0===b?function(){}:b;var c=this;c.fetching(!0);$.get(c.remoteUrl(),function(a){ko.mapping.fromJS(a,c)},\"json\").always(function(){c.fetching(!1);b()})};k.prototype=\n"
  "Object.create(h.prototype);k.prototype.constructor=k;l.prototype=Object.create(h.prototype);l.prototype.constructor=l;$(function(){var b=new v;ko.applyBindings(b);b.start()})})();function scaleString(h,k,l){return(parseInt(h)/k).toFixed(l)};\n"
  "function OpenEVSEError(f,b){this.type=f;this.message=void 0===b?\"\":b}function OpenEVSERequest(){var f=this;f._done=function(){};f._error=function(){};f._always=function(){};f.done=function(b){f._done=b;return f};f.error=function(b){f._error=b;return f};f.always=function(b){f._always=b;return f}}\n"
  "function OpenEVSE(f){var b=this;b._version=\"0.1\";b._endpoint=f;b.states={0:\"unknown\",1:\"not connected\",2:\"connected\",3:\"charging\",4:\"vent required\",5:\"diode check failed\",6:\"gfci fault\",7:\"no ground\",8:\"stuck relay\",9:\"gfci self-test failure\",10:\"over temperature\",254:\"sleeping\",255:\"disabled\"};b._lcd_colors=\"off red green yellow blue violet teal white\".split(\" \");b._status_functions={disable:\"FD\",enable:\"FE\",sleep:\"FS\"};b._lcd_types=[\"monochrome\",\"rgb\"];b._service_levels=[\"A\",\"1\",\"2\"];b.STANDARD_SERIAL_TIMEOUT=\n"
  ".5;b.RESET_SERIAL_TIMEOUT=10;b.STATUS_SERIAL_TIMEOUT=0;b.SYNC_SERIAL_TIMEOUT=.5;b.NEWLINE_MAX_AGE=5;b.CORRECT_RESPONSE_PREFIXES=(\"$OK\",\"$NK\");b.regex=/\\$([^\\^]*)(\\^..)?/;b._request=function(d,a){a=void 0===a?function(){}:a;var c=\"$\"+(Array.isArray(d)?d.join(\"+\"):d),e=new OpenEVSERequest;$.get(b._endpoint+\"?json=1&rapi=\"+encodeURI(c),function(c){c=c.ret.match(b.regex);null!==c?(c=c[1].split(\" \"),\"OK\"===c[0]?(a(c.slice(1)),e._done(c.slice(1))):e._error(new OpenEVSEError(\"OperationFailed\"))):e._error(new OpenEVSEError(\"UnexpectedResponse\"))},\n"
  "\"json\").always(function(){e._always()}).fail(function(){e._error(new OpenEVSEError(\"RequestFailed\"))});return e};b._flags=function(d){var a=b._request(\"GE\",function(b){var c=parseInt(b[1],16);isNaN(c)?a._error(new OpenEVSEError(\"ParseError\",'Failed to parse \"'+b[0]+'\"')):d({service_level:(c&1)+1,diode_check:0===(c&2),vent_required:0===(c&4),ground_check:0===(c&8),stuck_relay_check:0===(c&16),auto_service_level:0===(c&32),auto_start:0===(c&64),serial_debug:0!==(c&128),lcd_type:0!==(c&256)?\"monochrome\":\n"
  "\"rgb\",gfi_self_test:0===(c&512),temp_check:0===(c&1024)})});return a};b.reset=function(){return b._request(\"FR\")};b.time=function(d,a){a=void 0===a?!1:a;if(!1!==a)return b._request([\"S1\",a.getFullYear()-2E3,a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()],function(){b.time(d)});var c=b._request(\"GT\",function(a){if(6<=a.length){var b=parseInt(a[0]),e=parseInt(a[1]),f=parseInt(a[2]),l=parseInt(a[3]),m=parseInt(a[4]),h=parseInt(a[5]);isNaN(b)||isNaN(e)||isNaN(f)||isNaN(l)||isNaN(m)||\n"
  "isNaN(h)?c._error(new OpenEVSEError(\"ParseError\",'Could not parse time \"'+a.join(\" \")+'\" arguments')):d(new Date(2E3+b,e-1,f,l,m,h))}else c._error(new OpenEVSEError(\"ParseError\",\"Only received \"+a.length+\" arguments\"))});return c};b.timer=function(d,a,c){a=void 0===a?!1:a;c=void 0===c?!1:c;if(!1!==a&&!1!==c){var e=/([01]\\d|2[0-3]):([0-5]\\d)/,g=a.match(e);e=c.match(e);return null!==g&&null!==e?b._request([\"ST\",parseInt(g[1]),parseInt(g[2]),parseInt(e[1]),parseInt(e[2])],function(){b.timer(d)}):!1}var f=\n"
  "b._request(\"GD\",function(b){if(4<=b.length){var e=parseInt(b[0]),g=parseInt(b[1]),h=parseInt(b[2]),k=parseInt(b[3]);isNaN(e)||isNaN(g)||isNaN(h)||isNaN(k)?f._error(new OpenEVSEError(\"ParseError\",'Could not parse time \"'+b.join(\" \")+'\" arguments')):0===e&&0===g&&0===h&&0===k?d(!1,\"--:--\",\"--:--\"):(a=(10>e?\"0\":\"\")+e+\":\"+((10>g?\"0\":\"\")+g),c=(10>h?\"0\":\"\")+h+\":\"+((10>k?\"0\":\"\")+k),d(!0,a,c))}else f._error(new OpenEVSEError(\"ParseError\",\"Only received \"+b.length+\" arguments\"))});return f};b.cancelTimer=\n"
  "function(d){return b._request([\"ST\",0,0,0,0],function(){d()})};b.time_limit=function(d,a){a=void 0===a?!1:a;if(!1!==a)return b._request([\"S3\",Math.round(a/15)],function(){b.time_limit(d)});var c=b._request(\"G3\",function(a){if(1<=a.length){var b=parseInt(a[0]);isNaN(b)?c._error(new OpenEVSEError(\"ParseError\",'Could not parse \"'+a.join(\" \")+'\" arguments')):d(15*b)}else c._error(new OpenEVSEError(\"ParseError\",\"Only received \"+a.length+\" arguments\"))});return c};b.charge_limit=function(d,a){a=void 0===\n"
  "a?!1:a;if(!1!==a)return b._request([\"SH\",a],function(){b.charge_limit(d)});var c=b._request(\"GH\",function(a){if(1<=a.length){var b=parseInt(a[0]);isNaN(b)?c._error(new OpenEVSEError(\"ParseError\",'Could not parse \"'+a.join(\" \")+'\" arguments')):d(b)}else c._error(new OpenEVSEError(\"ParseError\",\"Only received \"+a.length+\" arguments\"))});return c};b.ammeter_settings=function(d,a,c){a=void 0===a?!1:a;c=void 0===c?!1:c;if(!1!==a&&!1!==c)return b._request([\"SA\",a,c],function(){d(a,c)});var e=b._request(\"GA\",\n"
  "function(a){if(2<=a.length){var b=parseInt(a[0]),c=parseInt(a[0]);isNaN(b)||isNaN(c)?e._error(new OpenEVSEError(\"ParseError\",'Could not parse \"'+a.join(\" \")+'\" arguments')):d(b,c)}else e._error(new OpenEVSEError(\"ParseError\",\"Only received \"+a.length+\" arguments\"))});return e};b.current_capacity=function(d,a){a=void 0===a?!1:a;if(!1!==a)return b._request([\"SC\",a],function(){b.current_capacity(d)});var c=b._request(\"GE\",function(a){if(1<=a.length){var b=parseInt(a[0]);isNaN(b)?c._error(new OpenEVSEError(\"ParseError\",\n"
  "'Could not parse \"'+a.join(\" \")+'\" arguments')):d(b)}else c._error(new OpenEVSEError(\"ParseError\",\"Only received \"+a.length+\" arguments\"))});return c};b.service_level=function(d,a){a=void 0===a?!1:a;return!1!==a?b._request([\"SL\",b._service_levels[a]],function(){b.service_level(d)}):b._flags(function(a){d(a.auto_service_level?0:a.service_level,a.service_level)})};b.current_capacity_range=function(d){var a=b._request(\"GC\",function(b){if(2<=b.length){var c=parseInt(b[0]),f=parseInt(b[1]);isNaN(c)||isNaN(f)?\n"
  "a._error(new OpenEVSEError(\"ParseError\",'Could not parse \"'+b.join(\" \")+'\" arguments')):d(c,f)}else a._error(new OpenEVSEError(\"ParseError\",\"Only received \"+b.length+\" arguments\"))});return a};b.status=function(d,a){a=void 0===a?!1:a;if(!1!==a)return b._request([b._status_functions[a]],function(){b.status(d)});var c=b._request(\"GS\",function(a){if(1<=a.length){var b=parseInt(a[0]);isNaN(b)?c._error(new OpenEVSEError(\"ParseError\",'Could not parse \"'+a.join(\" \")+'\" arguments')):d(b)}else c._error(new OpenEVSEError(\"ParseError\",\n"
  "\"Only received \"+a.length+\" arguments\"))});return c};b.diode_check=function(d,a){a=void 0===a?null:a;return null!==a?b._request([\"SD\",a?\"1\":\"0\"],function(){b.diode_check(d)}):b._flags(function(a){d(a.diode_check)})};b.gfi_self_test=function(d,a){a=void 0===a?null:a;return null!==a?b._request([\"SF\",a?\"1\":\"0\"],function(){b.gfi_self_test(d)}):b._flags(function(a){d(a.gfi_self_test)})};b.ground_check=function(d,a){a=void 0===a?null:a;return null!==a?b._request([\"SG\",a?\"1\":\"0\"],function(){b.ground_check(d)}):\n"
  "b._flags(function(a){d(a.ground_check)})};b.stuck_relay_check=function(d,a){a=void 0===a?null:a;return null!==a?b._request([\"SR\",a?\"1\":\"0\"],function(){b.stuck_relay_check(d)}):b._flags(function(a){d(a.stuck_relay_check)})};b.vent_required=function(d,a){a=void 0===a?null:a;return null!==a?b._request([\"SV\",a?\"1\":\"0\"],function(){b.vent_required(d)}):b._flags(function(a){d(a.vent_required)})};b.temp_check=function(d,a){a=void 0===a?null:a;return null!==a?a?b._request(\"GO\",function(a){b._request([\"SO\",\n"
  "a[0],a[1]],function(){b.temp_check(d)})}):b._request([\"SO\",\"0\",\"0\"],function(){b.temp_check(d)}):b._flags(function(a){d(a.temp_check)})};b.over_temperature_thresholds=function(d,a,c){a=void 0===a?!1:a;c=void 0===c?!1:c;if(!1!==a&&!1!==c)return b._request([\"SO\",a,c],function(){b.over_temperature_thresholds(d)});var e=b._request(\"GO\",function(a){if(2<=a.length){var b=parseInt(a[0]),c=parseInt(a[0]);isNaN(b)||isNaN(c)?e._error(new OpenEVSEError(\"ParseError\",'Could not parse \"'+a.join(\" \")+'\" arguments')):\n"
  "d(b,c)}else e._error(new OpenEVSEError(\"ParseError\",\"Only received \"+a.length+\" arguments\"))});return e};b.setEndpoint=function(d){b._endpoint=d}};\n";
